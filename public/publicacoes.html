<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>STUCHI & LEITE - Publicações</title>
<link rel="stylesheet" href="/style/global.css">
<script type="module" src="/main.js"></script>
<style>
.publi {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr 1fr 1fr;
  margin-top: 60px;
  gap: 50px;
}
.publi__img {
  display: block;
  width: 100%;
  height: auto;
  object-fit: contain;
}
.public__ctn {
  height: 100%;
  overflow: hidden;
  min-width: 0;
}
.publi .g-hover {
  font-size: 18px;
}
.g-hover {
  height: 100%;
}
@media screen and (max-width: 1000px) {
  .publi {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr 1fr;
    gap: 20px;
  }
  .public__ctn {
    justify-content: flex-end;
    overflow: initial;
    display: flex;
    flex-direction: column-reverse;
    gap: 10px;
  }
  .g-hover__line-height {
    position: initial;
    display: block;
    opacity: 1;
    background: none;
    backdrop-filter: none;
    top: 100%;
    left: 0;
    padding: 0;
    height: max-content;
    color: black;
    font-size: 14px !important;
    line-height: 110%;
    text-wrap: wrap;
    text-align: start;
  }
}
@media screen and (max-width: 600px) {
  .publi {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 10px;
  }
}
</style>
  
</head>
<body>
  <div id="body-scroll">
    <main>
      <section class="publi max__width" id="grid"></section>
    </main>
  </div>
</body>

<script type="module">
import { attributesNames } from '/constants/constants.js'
import { openPopup } from '/components/popup.js'
import { publicacoes } from '/datas/data_publications.js'
import { loadImages } from './main.js'

// ===== ONMOUNTED =====
document.addEventListener('DOMContentLoaded', () => {
  initHTMLGrid()
  loadImages(document.querySelectorAll('img'))
})


// ===== VARIABLES =====
const grid = document.getElementById('grid')


// ===== METHODS =====
const initHTMLGrid = () => {
  publicacoes.forEach(obj => {
    const imgThumb = document.createElement('div')
    imgThumb.classList.add('public__ctn', 'g-hover__container')
    imgThumb.setAttribute(attributesNames.projectId, obj.id)

    const hover = `<div class="g-hover g-hover__line-height">${obj.title}</div>`
    const hasPopup = obj.showPopup == true

    if (!hasPopup && obj.link !== '') imgThumb.innerHTML = `<a href="${obj.link}" target="_blank">${hover}</a>`
    else {
      if (hasPopup) imgThumb.addEventListener('click', (event) => openPopup(publicacoes, event))
      imgThumb.innerHTML = hover
    }

    imgThumb.innerHTML += `<img class="publi__img" width="300" height="300" src="/assets/${obj.imagesPaths[0]}" loading="lazy" alt="${obj.title}" />`

    
    grid.appendChild(imgThumb)
  })
}

</script>
</html>
