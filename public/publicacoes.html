<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>STUCHI & LEITE - Publicações</title>
<link rel="stylesheet" href="./style/global.css">
<script type="module" src="./main.js"></script>
<style>
.publi {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr 1fr 1fr;
  margin-top: 60px;
}
.publi__img {
  display: block;
  width: 100%;
  height: max-content;
  object-fit: contain;
}
.public__ctn {
  height: 100%;
  overflow: hidden;
}
.g-hover {
  height: 100%;
}
@media screen and (max-width: 1000px) {
  .publi {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr 1fr;
  }
}
@media screen and (max-width: 600px) {
  .publi {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
  }
}
</style>
  
</head>
<body>
  <div id="body-scroll">
    <main>
      <section class="publi g-gap max__width" id="grid"></section>
    </main>
  </div>
</body>

<script type="module">
import { openPopup } from './components/popup.js'
import { publicacoes } from './datas/data_publications.js'

// ===== ONMOUNTED =====
document.addEventListener('DOMContentLoaded', () => initHTMLGrid())


// ===== VARIABLES =====
const grid = document.getElementById('grid')


// ===== METHODS =====
const initHTMLGrid = () => {
  publicacoes.forEach(obj => {
    const imgThumb = document.createElement('div')
    imgThumb.classList.add('public__ctn', 'g-hover__container')
    imgThumb.setAttribute('title', obj.title)

    if (obj.showPopup === true) {
      imgThumb.innerHTML = `
        <div class="g-hover">${obj.title}</div> 
        <img class="publi__img" width="300" height="300" src="./assets/${obj.thumbPath}" loading="lazy" alt="mv2" />
      `
      imgThumb.addEventListener('click', (event) => openPopup(publicacoes, event))
    } else {
      imgThumb.innerHTML = `
        <a href="${obj.link}" target="_blank">
          <div class="g-hover">${obj.title}</div> 
        </a>
        <img class="publi__img" width="300" height="300" src="./assets/${obj.thumbPath}" loading="lazy" alt="mv2" />
      `
    }
    
    grid.appendChild(imgThumb)
  })
}

</script>
</html>